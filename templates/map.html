<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title></title>
    <meta name="description" content="">
    <meta name="keywords" content="">
    <meta name="viewport" content="width=device-width">

    <link rel="stylesheet" href="./../build/css/vendors.min.css">
    <link rel="stylesheet" href="./../build/css/main.css">

    <!--[if lt IE 9]>
      <script src="./../build/js/polyfills.min.js"></script>
    <![endif]-->
  </head>
  <body>


    <nav class="navbar navbar-default">
      <div class="navbar-header">
        <a class="navbar-brand" href="demo.html"><h1 class="h4">Notre histoire</h1></a>
      </div>
    
      <form id="search-form" class="navbar-form navbar-left" role="search">
        
        <input type="text" class="form-control" placeholder="Rechercher" />
        <span class="glyphicon glyphicon-search" aria-hidden="true"></span>
      </form>
      <a href="upload.html" class="btn btn-default navbar-btn navbar-right">
        <span class="hidden-xs">Ajouter un média</span>
        <span class="visible-xs glyphicon glyphicon-plus"></span>
      </a>
    
      <button id="search-mobile" type="button" class="btn btn-default navbar-btn navbar-right visible-xs">
        <span class="visible-xs glyphicon glyphicon-search"></span>
      </button>
    </nav>
<div class="panel panel-left panel-animate panel-leave panel-leaving">
  <button type="button" class="navbar-toggle panel-button">
    <span class="sr-only">Toggle navigation</span>
    <span class="icon-bar panel-closed-component"></span>
    <span class="icon-bar panel-closed-component"></span>
    <span class="icon-bar panel-closed-component"></span>
    <span class="chevron chevron-left chevron-thin"></span>  </button>
  <div class="panel-content">
    <ul class="nav nav-stacked">
      <li role="presentation" class="active"><a href="#">
        Aide
        <span class="pull-right"><span class="chevron chevron-right chevron-thin"></span></span>
      </a></li>
      <li role="presentation"><a href="#">
        Forum
        <span class="pull-right"><span class="chevron chevron-right chevron-thin"></span></span>
      </a></li>
      <li role="presentation"><a href="#">
        Blog
        <span class="pull-right"><span class="chevron chevron-right chevron-thin"></span></span>
      </a></li>
      <li role="presentation"><a href="#">
        Contact
        <span class="pull-right"><span class="chevron chevron-right chevron-thin"></span></span>
      </a></li>
    </ul>
    <div class="container-fluid">
      <hr />      <h3>
        <div class="text-clear">Le mouvement</div>
        <b>NotreHistoire</b>
      </h3>
      <p class="text-clear text-sans">
        Oremière plateforme participative Suisse romande. Elle a pour but de créer une fresque de médias sur l'histoire de notre région.<br>
        <a href="#">En savoir plus</a>
      </p>
      <hr />    </div>
    <ul class="nav nav-stacked">
      <li role="presentation" class="active"><a href="#">
        Activités récentes
        <span class="pull-right"><span class="chevron chevron-right chevron-thin"></span></span>
      </a></li>
      <li role="presentation"><a href="#">
        Fonds documentaires
        <span class="pull-right"><span class="chevron chevron-right chevron-thin"></span></span>
      </a></li>
    </ul>
  </div>
  <div class="panel-bottom">
    <div class="container-fluid">
      <p class="text-clear text-sans">
        <small><a class="text-clear" href="#">Condition générales</a> - <a class="text-clear" href="#">Impressum</a></small>
      </p>
    </div>
  </div>
</div><div class="panel panel-right panel-animate panel-leave panel-leaving">
  <button type="button" class="btn btn-default panel-button">
    <span class="hidden-xs panel-closed-component">Connexion</span>
    <span class="visible-xs glyphicon glyphicon-user panel-closed-component"></span>
    <span class="cross">&times;</span>
  </button>
  <div class="panel-content">
    <div class="container-fluid">
      <div class="spacer spacer-xs"></div>
      <img src="http://notrehistoire.ch.s3-eu-west-1.amazonaws.com/users/avatar/2015/08/876988c033485ccc_jpg_168x168_crop_q85.jpg" class="img-responsive img-circle pull-left">
      <h4>Martine Desarzens</h4>
      <div class="spacer spacer-sm"></div>
    </div>
    <ul class="nav nav-stacked">
      <li role="presentation" class="active"><a href="#">
        Afficher mon profil
        <span class="pull-right"><span class="chevron chevron-right chevron-thin"></span></span>
      </a></li>
      <li role="presentation"><a href="#">
        Mes médias
        <span class="pull-right"><span class="chevron chevron-right chevron-thin"></span></span>
      </a></li>
      <li role="presentation"><a href="#">
        Mes activités
        <span class="pull-right"><span class="chevron chevron-right chevron-thin"></span></span>
      </a></li>
      <li role="presentation"><a href="#">
        Mes préférences
        <span class="pull-right"><span class="chevron chevron-right chevron-thin"></span></span>
      </a></li>
    </ul>
    <div class="container-fluid">
      <hr />      <a href="#" class="text-sans text-clear">Me déconnecter</a>
    </div>
  </div>
</div><div id="overlay" class="overlay"></div>
<div class="container-wide">
  <div class="results-heading text-sans">
    <h1 class="h2">1114 résultats pour “train”</h1>
    <p>
      <span class="label label-default">
        chat
        <button class="label-close">&times;</button>
      </span>    <span class="label label-default">
        chalet
        <button class="label-close">&times;</button>
      </span>    <span class="label label-default">
        montagne
        <button class="label-close">&times;</button>
      </span>    <span class="label label-default">
        chien
        <button class="label-close">&times;</button>
      </span>    <span class="label label-default">
        arc-en-ciel
        <button class="label-close">&times;</button>
      </span>    <span class="label label-default">
        1980-1990
        <button class="label-close">&times;</button>
      </span>  </p>
  </div>  <div class="results-navbar text-sans">
    <div class="row">
      <div class="col-sm-9 col-sm-push-3 text-right">
        <strong class="text-clear">
          Trier par
        </strong>
        <select class="form-control">
          <option>Alphabetical</option>
          <option>Les plus vus</option>
          <option>Most commented</option>
          <option>Most followed</option>
          <option selected="selected">Most relevant</option>
          <option>Newest</option>
          <option>Oldest</option>
          <option>Origin_date récent</option>
          <option>Origin_date vieux</option>
          <option>Recently updated</option>
        </select>
        <span class="vertical-separator"></span>
        <button id="display-grid" class="btn btn-default active">
          <i class="glyphicon glyphicon-th"></i>
        </button>
        <button id="display-list" class="btn btn-default">
          <i class="glyphicon glyphicon-th-list"></i>
        </button>
        <button id="display-map" class="btn btn-default">
          <i class="glyphicon glyphicon-map-marker"></i>
        </button>
      </div>
      <div class="col-sm-3 col-sm-pull-9">
        <button id="toggle-sidebar" class="btn btn-clear btn-sm">Filtres <span class="chevron chevron-right chevron-thin"></span></button>
      </div>
    </div>
  </div>  <div class="row">
    <div id="sidebar" class="sidebar col-sm-3">
      <div class="facet-sidebar">
        <div class="text-right">
          <button class="btn btn-link btn-xs" id="close-all-facets">Tout fermer</button>
        </div>
          <div class="facet-group open">
            <div class="facet-title">
              Périodes<span class="chevron pull-right text-danger"></span>
            </div>
            <ul>
                  <li>
                    <div class="checkbox">
                      <label><input type="checkbox" value="all" /> Toute</label>
                      <span class="text-clear pull-right">587</span>
                    </div>
                  </li>
                  <li>
                    <div class="checkbox">
                      <label><input type="checkbox" value="before_1900" /> Avant 1900</label>
                      <span class="text-clear pull-right">94</span>
                    </div>
                  </li>
                  <li>
                    <div class="checkbox">
                      <label><input type="checkbox" value="1900-1914" /> 1900 - 1914</label>
                      <span class="text-clear pull-right">41</span>
                    </div>
                  </li>
                  <li>
                    <div class="checkbox">
                      <label><input type="checkbox" value="1914-1918" /> 1914 - 1918</label>
                      <span class="text-clear pull-right">89</span>
                    </div>
                  </li>
                  <li>
                    <div class="checkbox">
                      <label><input type="checkbox" value="1918-1939" /> 1918 - 1939</label>
                      <span class="text-clear pull-right">40</span>
                    </div>
                  </li>
                  <li>
                    <div class="checkbox">
                      <label><input type="checkbox" value="1939-1945" /> 1939 - 1945</label>
                      <span class="text-clear pull-right">64</span>
                    </div>
                  </li>
                  <li>
                    <div class="checkbox">
                      <label><input type="checkbox" value="1945-1960" /> 1945 - 1960</label>
                      <span class="text-clear pull-right">89</span>
                    </div>
                  </li>
                  <li>
                    <div class="checkbox">
                      <label><input type="checkbox" value="1960-1980" /> 1960 - 1980</label>
                      <span class="text-clear pull-right">87</span>
                    </div>
                  </li>
                  <li>
                    <div class="checkbox">
                      <label><input type="checkbox" value="1980-2000" /> 1980 - 2000</label>
                      <span class="text-clear pull-right">83</span>
                    </div>
                  </li>
                  <li>
                    <div class="checkbox">
                      <label><input type="checkbox" value="2000-2016" /> 2000 - 2016</label>
                      <span class="text-clear pull-right">42</span>
                    </div>
                  </li>
              <li>
                <button class="facet-add">
                  <span>+</span>
                  Ajouter
                </button>
                <form class="facet-form hidden">
                  <input type="text" class="form-control input-sm">
                </form>
              </li>
            </ul>
          </div>    <div class="facet-group open">
            <div class="facet-title">
              Types<span class="chevron pull-right text-danger"></span>
            </div>
            <ul>
                  <li>
                    <div class="checkbox">
                      <label><input type="checkbox" value="all" /> Toutes</label>
                      <span class="text-clear pull-right">1109</span>
                    </div>
                  </li>
                  <li>
                    <div class="checkbox">
                      <label><input type="checkbox" value="picture" /> Photographies</label>
                      <span class="text-clear pull-right">456</span>
                    </div>
                  </li>
                  <li>
                    <div class="checkbox">
                      <label><input type="checkbox" value="sound" /> Bande sonore</label>
                      <span class="text-clear pull-right">145</span>
                    </div>
                  </li>
                  <li>
                    <div class="checkbox">
                      <label><input type="checkbox" value="video" /> Vidéos</label>
                      <span class="text-clear pull-right">98</span>
                    </div>
                  </li>
                  <li>
                    <div class="checkbox">
                      <label><input type="checkbox" value="articles" /> Articles</label>
                      <span class="text-clear pull-right">410</span>
                    </div>
                  </li>
              <li>
                <button class="facet-add">
                  <span>+</span>
                  Ajouter
                </button>
                <form class="facet-form hidden">
                  <input type="text" class="form-control input-sm">
                </form>
              </li>
            </ul>
          </div>    <div class="facet-group open">
            <div class="facet-title">
              Catégories<span class="chevron pull-right text-danger"></span>
            </div>
            <ul>
                  <li>
                    <div class="checkbox">
                      <label><input type="checkbox" value="dui," /> lectus pede,</label>
                      <span class="text-clear pull-right">24</span>
                    </div>
                  </li>
                  <li>
                    <div class="checkbox">
                      <label><input type="checkbox" value="sit amet, consectetuer" /> ac turpis egestas.</label>
                      <span class="text-clear pull-right">480</span>
                    </div>
                  </li>
                  <li>
                    <div class="checkbox">
                      <label><input type="checkbox" value="montes, nascetur ridiculus" /> Morbi quis</label>
                      <span class="text-clear pull-right">221</span>
                    </div>
                  </li>
                  <li>
                    <div class="checkbox">
                      <label><input type="checkbox" value="blandit" /> a mi</label>
                      <span class="text-clear pull-right">347</span>
                    </div>
                  </li>
                  <li>
                    <div class="checkbox">
                      <label><input type="checkbox" value="vitae aliquam eros" /> metus sit</label>
                      <span class="text-clear pull-right">358</span>
                    </div>
                  </li>
                  <li>
                    <div class="checkbox">
                      <label><input type="checkbox" value="malesuada" /> tempus</label>
                      <span class="text-clear pull-right">115</span>
                    </div>
                  </li>
                  <li>
                    <div class="checkbox">
                      <label><input type="checkbox" value="aliquet. Phasellus" /> vitae semper egestas,</label>
                      <span class="text-clear pull-right">285</span>
                    </div>
                  </li>
                  <li>
                    <div class="checkbox">
                      <label><input type="checkbox" value="nec tellus." /> sed</label>
                      <span class="text-clear pull-right">493</span>
                    </div>
                  </li>
              <li>
                <button class="facet-add">
                  <span>+</span>
                  Ajouter
                </button>
                <form class="facet-form hidden">
                  <input type="text" class="form-control input-sm">
                </form>
              </li>
            </ul>
          </div></div>    </div>
    <div class="col-sm-9">
      <div id="result-map" class="map"></div>
      
      <script src="https://maps.googleapis.com/maps/api/js"></script>
      <script src="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobox/src/infobox.js"></script>
      <script src="https://googlemaps.github.io/js-marker-clusterer/src/markerclusterer.js"></script>
      
      <script>
        // Get data
        var req = new XMLHttpRequest();
        req.open('GET', 'http://web2016.notrehistoire.ch/api/v1/search?q=village', true);
        req.send();
        req.addEventListener("readystatechange", init, false);
      
        // Define cluster styles
        var styles = [{
          url: '../build/img/marker-small.png',
          width: 48,
          height: 48,
          anchor: [0, 0],
          textColor: '#FFFFFF',
          textSize: 12
        }, {
          url: '../build/img/marker-medium.png',
          width: 64,
          height: 64,
          anchor: [0, 0],
          textColor: '#FFFFFF',
          textSize: 15
        }, {
          url: '../build/img/marker-big.png',
          width: 80,
          height: 80,
          anchor: [0, 0],
          textColor: '#FFFFFF',
          textSize: 20
        }];
      
        // Init map
        function init() {
          var data = JSON.parse(req.responseText),
              center = new google.maps.LatLng(45.534764, 8.199763),
              bounds = new google.maps.LatLngBounds(),
              map = new google.maps.Map(document.getElementById('result-map'), {
                zoom: 6,
                center: center,
                mapTypeId: google.maps.MapTypeId.ROADMAP
              });
      
          // Define marker custom pin
          var image = new google.maps.MarkerImage("../build/img/pin.png",
                new google.maps.Size(26,34),
                new google.maps.Point(0,0),
                new google.maps.Point(13,34));
      
          var markers = [];
      
          // Loop over data.results
          for (var i = 0; i <= data.results.length; i++) {
            var item = data.results[i];
      
            // Create marker only if the result is geolocated
            if (typeof item !== 'undefined' && item.lat != null && item.lng != null) {
              var latLng = new google.maps.LatLng(item.lat,
                  item.lng);
      
              // Define marker
              var marker = new google.maps.Marker({
                position: latLng,
                icon: image,
                title: 'Hello from here !',
                map: map
              });
              markers.push(marker);
      
              // Add marker's position to map bounds
              bounds.extend(marker.position);
      
              // Define marker's popup
              switch (item.type) {
                case 'photo':
                  var icon  = 'picture';
                  var thumb = '<img src="'+item.thumbnail+'" />';
                  break;
                case 'video':
                  var icon  = 'film';
                  var thumb = '<img src="'+item.thumbnail+'" />';
                  break;
                case 'audio':
                  var icon  = 'glyphicon-headphones';
                  var thumb = '<p>'+item.description+'</p>';
                  break;
                case 'article':
                  var icon  = 'list-alt';
                  var thumb = '<p>'+item.description+'</p>';
                  break;
                default:
                  var icon  = 'picture';
                  var thumb = '<img src="'+item.thumbnail+'" />';
              }
      
              var content = '<a href="#">'+
                              '<div class="infobox-thumb">'+
                                thumb+
                              '</div>'+
                              '<div class="infobox-caption">'+
                                item.title+
                                '<span class="glyphicon glyphicon-'+icon+'"></span>'+
                              '</div>'+
                            '</a>';
      
              var infowindow = new InfoBox({
                    alignBottom: true,
                    boxClass: 'infobox',
                    boxStyle: {
                       width: '280px'
                    },
                    content: content,
                    closeBoxURL: '../build/img/close.png',
                    disableAutoPan: false,
                    infoBoxClearance: new google.maps.Size(1, 1),
                    maxWidth: 150,
                    pixelOffset: new google.maps.Size(-140, -40),
                    zIndex: null
                  });
      
              // Open popup on marker click
              google.maps.event.addListener(marker,'click', (function(marker,content,infowindow){
                return function() {
                  infowindow.open(map,marker);
                };
              })(marker,content,infowindow));
            }
          }
      
          // Instantiate cluster module
          var markerCluster = new MarkerClusterer(map, markers, {
            styles: styles,
            gridSize: 65
          });
      
          // Fit map to markers
          map.fitBounds(bounds);
        }
      </script>      <div class="clearfix"></div>
      <a href="#" class="btn btn-default btn-lg btn-block">Voir plus...</a>    </div>
  </div>
</div>

<!-- Demo purpose -->
<div class="spacer spacer-xl"></div>



    <script src="./../build/js/vendors.min.js"></script>
    <script src="./../build/js/main.js"></script>
  </body>
</html>
